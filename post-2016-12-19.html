<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
<title>New blogging, new danger</title>  
  <link rel="stylesheet" href="alabaster.css" type="text/css" />
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '',
      VERSION:     '',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '',
      HAS_SOURCE:  true
    };
  </script>
  
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="underscore.js"></script>
  <script type="text/javascript" src="doctools.js"></script>

  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>
<body >  

<div class="document">

<div class="documentwrapper">
<div class="bodywrapper"> 
<div class="body">
<div class="section">

<h2>New blogging, new danger</h2>
<p>I have been getting increasingly frustrated with the blogging system I had been using. It was basically <code>sphinx</pre></code> with a bit of extra processing from something called <code>ablog</pre></code>. It seemed very hard to change or extend anything and generated pages that (for some reason) needed to be a sub-directory of the main site (requiring a forward from index.html) and loaded very slowly. </p>
<p>It also seemed to confuse <code>git</pre></code> quite a lot every time I rebuilt the site.</p>
<p>I started looking deeper into how it all worked. It appears that almost all the formatting cleverness is done through <code>alabaster.css</pre></code>, just adding that to the top a reasonably plain html file generates pages that look quite pleasant.</p>
<p>This inspired me to see if I could recreate the other useful bits of the set up (converting <code>.rst</pre></code> files into <code>.html</pre></code> and building a search index) in a clearer, simpler, way.</p>
<p>The search index is created by  <code>/usr/lib64/python3.4/site-packages/sphinx/search/__init__.py</pre></code> with help from <code>/usr/lib64/python3.4/site-packages/sphinx/search/en.py</pre></code>. Each word is reduced to its stem, using the porterstemmer algorithm, then filtered. </p>
<p>The source indicated a C implementation of the stemmer could be found <a href="http://www.tartarus.org/~martin/PorterStemmer">here</a>.</p>
<p>I then needed to parse my rst files into a single doctools doctree object and run the indexer.</p>
<p>After a certain amount of toiling in the sphinx source (and minimal documentation), I realised that it would be quicker (and more fun) to write my own sort-of-rst parser. This would have the added benefit that I could do links in a much more sensible manner (i.e. like markdown).</p>
<p>This I have now done (apart from tables) and this (current) blog is the result.</p>
<p>The code is available from <a href="https://github.com/swissdrumassault/swissdrumassault.github.io.git">here</a>.</p>
  
</div>
</div>
</div>
</div>

<div class="sphinxsidebar" role="navigation" aria-label="main navigation">
<div class="sphinxsidebarwrapper">

<h2>2016-12-19</h2>
<ul>
<li><a href="index.html">top</a></li>
</ul>
<br/>
<ul>
<li><a href="post-2016-12-19.html">2016-12-19 - New blogging, new danger</a></li>
<li><a href="post-2016-06-12.html">2016-06-12 - Gmail is awful</a></li>
<li><a href="post-2016-03-18.html">2016-03-18 - Linux on a BWC 7&quot; tablet</a></li>
<li><a href="post-2016-02-14.html">2016-02-14 - A 45 degree Styrofoam cutting jig</a></li>
<li><a href="post-2016-02-05.html">2016-02-05 - Linux Ainol Novo 7</a></li>
<li><a href="post-2016-02-03.html">2016-02-03 - Non-constant curvature log-likelihoods</a></li>
<li><a href="post-2016-02-03a.html">2016-02-03 - Guitar project final piece</a></li>
<li><a href="post-2016-02-02.html">2016-02-02 - C++ link errors with AVR systems</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
</div>

</body>
</html>

